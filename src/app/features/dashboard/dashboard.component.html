<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <p class="subtitle">Welcome back! Here's what's happening with your projects.</p>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon markets">
            <mat-icon>store</mat-icon>
          </div>
          <div class="stat-details">
            <div class="stat-value">{{ stats.totalMarkets }}</div>
            <div class="stat-label">Total Markets</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon projects">
            <mat-icon>folder</mat-icon>
          </div>
          <div class="stat-details">
            <div class="stat-value">{{ stats.activeProjects }}</div>
            <div class="stat-label">Active Projects</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon pending">
            <mat-icon>pending_actions</mat-icon>
          </div>
          <div class="stat-details">
            <div class="stat-value">{{ stats.pendingTasks }}</div>
            <div class="stat-label">Pending Tasks</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon completed">
            <mat-icon>check_circle</mat-icon>
          </div>
          <div class="stat-details">
            <div class="stat-value">{{ stats.completedTasks }}</div>
            <div class="stat-label">Completed Tasks</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Recent Projects and Upcoming Tasks -->
  <div class="content-grid">
    <!-- Recent Projects -->
    <mat-card class="content-card">
      <mat-card-header>
        <mat-card-title>Recent Projects</mat-card-title>
        <button mat-button color="primary" routerLink="/projects">View All</button>
      </mat-card-header>
      <mat-card-content>
        <div class="projects-list">
          @for (project of recentProjects; track project.id) {
            <div class="project-item">
              <div class="project-info">
                <div class="project-name">{{ project.name }}</div>
                <div class="project-market">{{ project.market }}</div>
              </div>
              <div class="project-status">
                <mat-chip [color]="getStatusColor(project.status)">
                  {{ project.status.replace('_', ' ') }}
                </mat-chip>
                <div class="progress-bar">
                  <div class="progress-fill" [style.width.%]="project.progress"></div>
                </div>
                <span class="progress-text">{{ project.progress }}%</span>
              </div>
            </div>
          }
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Upcoming Tasks -->
    <mat-card class="content-card">
      <mat-card-header>
        <mat-card-title>Upcoming Tasks</mat-card-title>
        <button mat-button color="primary" routerLink="/tasks">View All</button>
      </mat-card-header>
      <mat-card-content>
        <div class="tasks-list">
          @for (task of upcomingTasks; track task.id) {
            <div class="task-item">
              <div class="task-info">
                <div class="task-title">{{ task.title }}</div>
                <div class="task-project">{{ task.project }}</div>
              </div>
              <div class="task-meta">
                <mat-chip [color]="getPriorityColor(task.priority)" class="priority-chip">
                  {{ task.priority }}
                </mat-chip>
                <div class="task-due">
                  <mat-icon>event</mat-icon>
                  <span>{{ task.dueDate }}</span>
                </div>
              </div>
            </div>
          }
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>